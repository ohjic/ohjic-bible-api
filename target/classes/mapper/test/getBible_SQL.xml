<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="getBible">

    <select id="bibleContents" resultType="ohjic.bible.ohbibleVo.BibleContentVO" parameterType="ohjic.bible.ohbibleVo.BibleSerchVO" >
        SELECT bk.bible_kind as bibleKind,bk.language, bk.book_name as bookName, bk.book_max_chapter as bookMaxChapter
              , bk.chapter_max_paragraph as ChapterMaxParagraph ,bkv.paragraph_value as paragraphValue, bkv.chapter, bkv.paragraph
        FROM bible as b
        JOIN bible_book bk ON bk.bible_idx = b.bible_idx
        JOIN bible_book_kind_value bkv ON bk.book_kind_idx = bkv.book_kind_idx
        WHERE b.bible_idx = #{bibleIdx} and bk.book_kind_idx = #{bookKindIdx}
        <if test="SearchRange == 'chapter'"> and bkv.chapter BETWEEN #{firstChapter} and #{lastChapter}  </if>
        <if test="SearchRange == 'paragraph'"> and bkv.chapter = #{chapter} AND bkv.paragraph BETWEEN #{firstParagraph} and #{lastParagraph}</if>

    </select>


</mapper>